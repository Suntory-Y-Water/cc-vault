# Requirements Document

## Introduction
サブドメインテーマシステム完成は、既存のサブドメインルーティング基盤の上に、AIエージェント別の動的テーマ適用を完成させる機能です。現在ハードコーディングされている色やスタイルを、各AIエージェント（Claude Code、Codex等）の専用設定に基づいて動的に変更することで、真のマルチテナント・テーマ分離を実現します。

## Requirements

### Requirement 1: ページコンポーネントの動的テーマ適用
**Objective:** UIデザイナーとして、各AIエージェントのブランドカラーがページ全体で一貫して適用されることを求めます。これにより、各テナントが独自の視覚的アイデンティティを持てるようになります。

#### Acceptance Criteria
1. WHEN ユーザーがホームページ（src/app/page.tsx）を閲覧する THEN サブドメインテーマシステム SHALL 週間レポートボタンの背景色とホバー色をAIエージェント設定の primary と primaryHover カラーに動的変更する
2. WHEN ユーザーがホームページの説明文を閲覧する THEN サブドメインテーマシステム SHALL テキストカラーをAIエージェント設定の secondary カラーに動的変更する
3. WHEN ユーザーが機能紹介ページ（src/app/features/page.tsx）を閲覧する THEN サブドメインテーマシステム SHALL カード背景、ボーダー、アイコン、テキストの各色をAIエージェント設定に基づき動的変更する
4. WHEN ユーザーがヘルプページ、利用規約ページ、プライバシーページを閲覧する THEN サブドメインテーマシステム SHALL 各ページのテーマ色をAIエージェント設定に基づき統一的に適用する

### Requirement 2: レイアウトコンポーネントの動的テーマ適用
**Objective:** エンドユーザーとして、サイト全体のナビゲーションとフッターが一貫したブランドカラーで表示されることを求めます。これにより、各AIエージェント専用サイトとしての統一感を得られます。

#### Acceptance Criteria
1. WHEN ユーザーが検索ボックス（src/components/search/SearchBox.tsx）を操作する THEN サブドメインテーマシステム SHALL 検索アイコンとフォーカス時の境界線色をAIエージェント設定のaccentカラーに動的変更する
2. WHEN ユーザーがフッター（src/components/layout/Footer.tsx）を閲覧する THEN サブドメインテーマシステム SHALL 背景色、境界線色、テキスト色、ホバー色をAIエージェント設定に基づき動的変更する
3. WHEN フッターの内容がテナント固有である必要がある場合 THEN サブドメインテーマシステム SHALL AIエージェント設定のbranding情報に基づいてサイト名と説明を動的変更する

### Requirement 3: 画像・アイコンリソースの動的管理
**Objective:** ブランドマネージャーとして、各AIエージェント専用のOGP画像とSVGアイコンが正しく表示されることを求めます。これにより、ソーシャルメディア共有時や検索結果での視覚的ブランド統一を実現できます。

#### Acceptance Criteria
1. WHEN ユーザーがページをソーシャルメディアで共有する THEN サブドメインテーマシステム SHALL OGP画像をAIエージェント専用のブランド画像に動的変更する
2. WHEN ユーザーがヘッダーアイコンを閲覧する THEN サブドメインテーマシステム SHALL アイコンをAIエージェント設定に基づく専用アイコンに動的変更する
3. IF AIエージェント専用リソースが存在しない場合 THEN サブドメインテーマシステム SHALL デフォルトリソースを適切にフォールバック表示する

### Requirement 4: CSS変数とテーマ適用メカニズムの完成
**Objective:** 開発者として、動的テーマ適用のためのCSS変数システムが全コンポーネントで一貫して機能することを求めます。これにより、保守性と拡張性の高いテーマシステムを実現できます。

#### Acceptance Criteria
1. WHEN サブドメインからAIエージェントが識別される THEN サブドメインテーマシステム SHALL CSS変数（--ai-primary、--ai-background等）をAIエージェント設定値で動的設定する
2. WHEN 新しいコンポーネントが追加される THEN サブドメインテーマシステム SHALL 既存のCSS変数を使用することで自動的にテーマ適用される仕組みを提供する
3. WHILE ページが表示されている間 サブドメインテーマシステム SHALL テーマの一貫性を維持し、混在や競合を防止する

### Requirement 5: テーマ設定の検証と品質保証
**Objective:** 品質保証エンジニアとして、各AIエージェントのテーマが正しく適用され、視覚的な一貫性が保たれることを求めます。これにより、ユーザーエクスペリエンスの品質を保証できます。

#### Acceptance Criteria
1. WHEN 無効なサブドメインでアクセスする場合 THEN サブドメインテーマシステム SHALL デフォルトテーマを適用し、エラー状態でも適切な表示を維持する
2. WHEN AIエージェント設定にカラー情報が不足する場合 THEN サブドメインテーマシステム SHALL フォールバック色を適用し、UI破綻を防止する
3. IF CSS変数の設定が失敗する場合 THEN サブドメインテーマシステム SHALL エラーログを出力し、デフォルトスタイルでの表示継続を保証する