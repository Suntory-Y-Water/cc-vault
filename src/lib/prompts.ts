/**
 * AI プロンプトテンプレート集
 * コグニティブ・デザイン原則に基づく構造化プロンプト生成関数
 *
 * 設計思想：
 * - 5要素構造（前提・状況・目的・動機・制約）による思考のレンズ提供
 * - 論理構造化による曖昧性排除と一貫性確保
 * - 契約による設計での品質保証（事前・事後条件チェック）
 */

/**
 * Claude Code 記事要約用プロンプト（コグニティブ・デザイン適用）
 * @param articleContent - 要約する記事の内容
 * @returns コグニティブ・デザインに基づく構造化プロンプト文字列
 */
export function getArticleSummaryPrompt(articleContent: string): string {
  // 事前条件チェック
  if (!articleContent || articleContent.trim() === '') {
    throw new Error('記事内容が空です');
  }

  const prompt = `# 思考のレンズ

## 前提 (Premise):
- あなたは Claude Code に関する技術記事の価値を正確に評価する専門家です
- 技術記事の要約は読者の時間を節約し、学習効率を最大化する重要な役割を持ちます
- 要約の質は記事の本質的価値を損なうことなく伝える正確性によって決まります
- 日本語での技術情報伝達は、専門用語と平易な表現のバランスが重要です

## 状況 (Situation):
- Claude Code（Anthropic の CLI ツール）に関する技術記事が与えられています
- この記事は開発者コミュニティで共有され、学習リソースとして活用されます
- 読者は限られた時間の中で、記事を読む価値があるかを判断する必要があります
- 要約は記事の技術レベル、実用性、具体性を適切に反映する必要があります

## 目的 (Purpose):
- 記事内容を150-200文字で正確に要約する
- 読者が記事の価値と自身のニーズとの適合性を判断できる情報を提供する
- 記事の主題、学習目標、実用性、技術レベルを明確に伝える

## 動機 (Motive):
- 開発者の学習効率を最大化し、技術コミュニティの知識共有を促進する
- 記事作成者の努力を適切に評価し、読者との橋渡しを行う
- Claude Code エコシステムの発展に貢献し、開発者体験の向上を支援する

## 制約 (Constraint):
- 文字数は句読点・記号を除いて150-200文字厳守
- 日本語のプレーンテキスト形式のみ
- 要約以外の前置きや解説は一切含めない
- 客観的事実に基づいた表現のみ使用
- 主観的評価や推測は避ける

## 実行指示

以下の記事内容について、上記の思考レンズに基づいて要約を作成してください：

${articleContent}

要約に含めるべき要素：
1. Claude Code の具体的機能・トピック
2. 読者が得られる学習価値
3. 実装方法・コード例・手順の有無と詳細度
4. 対象とする技術レベル
5. 実用性・活用可能性

要約のみを出力してください。`;

  return prompt;
}

/**
 * 週間レポート全体総括用プロンプト（コグニティブ・デザイン適用）
 * @param summaries - 週間記事要約データの配列
 * @returns コグニティブ・デザインに基づく構造化プロンプト文字列
 */
export function getOverallSummaryPrompt(
  summaries: Array<{
    articleId: string;
    summary: string;
  }>,
): string {
  // 事前条件チェック
  if (!summaries || summaries.length === 0) {
    throw new Error('要約データが空です');
  }

  const summaryTexts = summaries.map((s) => `${s.summary}`).join('\n');

  const prompt = `# 思考のレンズ

## 前提 (Premise):
- あなたは Claude Code エコシステムの技術動向を分析する専門アナリストです
- 技術コミュニティのトレンド分析は、開発者の学習方向性と投資判断を左右する重要な情報です
- 週間総括は個別記事の価値を統合し、全体像として提示する高次の情報処理です
- データに基づく客観的分析が、推測や憶測よりも信頼性の高い洞察を生み出します

## 状況 (Situation):
- 今週の Claude Code 関連記事群の要約データが与えられています
- これらの記事は開発者コミュニティで注目され、共有された実績があります
- 読者は週全体のトレンドを理解し、自身の技術学習戦略に活用したいと考えています
- 個別記事では見えない、横断的なパターンや傾向の抽出が求められています

## 目的 (Purpose):
- 今週の Claude Code 技術動向を200-300文字で総括する
- 注目された機能・トピックとその背景を明確化する
- 開発者コミュニティの関心の方向性を特定する
- 実用性・活用事例の傾向から今後の展望を示唆する

## 動機 (Motive):
- 開発者の限られた学習時間を最適配分するための道標を提供する
- Claude Code エコシステムの成熟度と発展方向性を可視化する
- 技術コミュニティの集合知を統合し、個人では見落としがちな重要トレンドを発見する
- 技術投資の意思決定を支援し、開発者のキャリア形成に貢献する

## 制約 (Constraint):
- 文字数は句読点・記号を除いて200-300文字厳守
- 日本語のプレーンテキスト形式のみ
- 総括以外の前置きや解説は一切含めない
- 客観的データに基づいた分析のみ
- 個別記事への直接言及や番号付け引用は禁止
- 装飾記号（太字・記号等）の使用は禁止

## 実行指示

以下の今週の記事要約データについて、上記の思考レンズに基づいて週間総括を作成してください：

${summaryTexts}

分析に含めるべき要素：
1. 今週の Claude Code 技術動向の全体的特徴
2. 特に注目された機能・トピックとその意義
3. 開発者コミュニティの関心領域の変化
4. 実用的活用事例から見える応用トレンド
5. 今後の学習・技術投資の方向性への示唆

総括文章のみを出力してください。`;

  return prompt;
}
